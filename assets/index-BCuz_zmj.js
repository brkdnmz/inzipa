import{r as g,M as ce,j as b,E as ae,F as zt,P as ue,H as fe,I as le,L as he,m as G,J as j,c as z,K as Pt,N as de,C as dt,O as pe,Q as me,S as _e}from"./index-Dk5G0LZl.js";import{g as ye,S as ge}from"./Stack-CysoSRaI.js";class ve extends g.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const s=n.offsetParent,r=ae(s)&&s.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=r-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function be({children:e,isPresent:t,anchorX:n}){const s=g.useId(),r=g.useRef(null),i=g.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=g.useContext(ce);return g.useInsertionEffect(()=>{const{width:o,height:a,top:f,left:u,right:d}=i.current;if(t||!r.current||!o||!a)return;const p=n==="left"?`left: ${u}`:`right: ${d}`;r.current.dataset.motionPopId=s;const l=document.createElement("style");return c&&(l.nonce=c),document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            ${p}px !important;
            top: ${f}px !important;
          }
        `),()=>{document.head.contains(l)&&document.head.removeChild(l)}},[t]),b.jsx(ve,{isPresent:t,childRef:r,sizeRef:i,children:g.cloneElement(e,{ref:r})})}const xe=({children:e,initial:t,isPresent:n,onExitComplete:s,custom:r,presenceAffectsLayout:i,mode:c,anchorX:o})=>{const a=zt(we),f=g.useId();let u=!0,d=g.useMemo(()=>(u=!1,{id:f,initial:t,isPresent:n,custom:r,onExitComplete:p=>{a.set(p,!0);for(const l of a.values())if(!l)return;s&&s()},register:p=>(a.set(p,!1),()=>a.delete(p))}),[n,a,s]);return i&&u&&(d={...d}),g.useMemo(()=>{a.forEach((p,l)=>a.set(l,!1))},[n]),g.useEffect(()=>{!n&&!a.size&&s&&s()},[n]),c==="popLayout"&&(e=b.jsx(be,{isPresent:n,anchorX:o,children:e})),b.jsx(ue.Provider,{value:d,children:e})};function we(){return new Map}const q=e=>e.key||"";function kt(e){const t=[];return g.Children.forEach(e,n=>{g.isValidElement(n)&&t.push(n)}),t}const pt=({children:e,custom:t,initial:n=!0,onExitComplete:s,presenceAffectsLayout:r=!0,mode:i="sync",propagate:c=!1,anchorX:o="left"})=>{const[a,f]=fe(c),u=g.useMemo(()=>kt(e),[e]),d=c&&!a?[]:u.map(q),p=g.useRef(!0),l=g.useRef(u),P=zt(()=>new Map),[y,_]=g.useState(u),[m,k]=g.useState(u);le(()=>{p.current=!1,l.current=u;for(let C=0;C<m.length;C++){const v=q(m[C]);d.includes(v)?P.delete(v):P.get(v)!==!0&&P.set(v,!1)}},[m,d.length,d.join("-")]);const h=[];if(u!==y){let C=[...u];for(let v=0;v<m.length;v++){const w=m[v],E=q(w);d.includes(E)||(C.splice(v,0,w),h.push(w))}return i==="wait"&&h.length&&(C=h),k(kt(C)),_(u),null}const{forceRender:x}=g.useContext(he);return b.jsx(b.Fragment,{children:m.map(C=>{const v=q(C),w=c&&!a?!1:u===m||d.includes(v),E=()=>{if(P.has(v))P.set(v,!0);else return;let W=!0;P.forEach(ut=>{ut||(W=!1)}),W&&(x==null||x(),k(l.current),c&&(f==null||f()),s&&s())};return b.jsx(xe,{isPresent:w,initial:!p.current||n?void 0:!1,custom:t,presenceAffectsLayout:r,mode:i,onExitComplete:w?void 0:E,anchorX:o,children:C},v)})})},Ct=e=>{let t;const n=new Set,s=(f,u)=>{const d=typeof f=="function"?f(t):f;if(!Object.is(d,t)){const p=t;t=u??(typeof d!="object"||d===null)?d:Object.assign({},t,d),n.forEach(l=>l(t,p))}},r=()=>t,o={setState:s,getState:r,getInitialState:()=>a,subscribe:f=>(n.add(f),()=>n.delete(f))},a=t=e(s,r,o);return o},Se=e=>e?Ct(e):Ct,Pe=e=>e;function ke(e,t=Pe){const n=G.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return G.useDebugValue(n),n}const Gt=g.createContext(null);function U(e){const t=g.useContext(Gt);if(!t)throw new Error("useGameContext must be used within a GameProvider");return ke(t,e)}function Ce(){return U(t=>t.grid)}function Ee(){return U(t=>t.steps)}function Ae(){return U(t=>t.isVisited)}function Me(){return U(t=>t.actions)}function Vt(){return U(t=>t.startedAt)}function Ht(){return U(t=>t.finishedAt)}function De(e,t,n){return Math.max(t,Math.min(e,n))}const A={toVector(e,t){return e===void 0&&(e=t),Array.isArray(e)?e:[e,e]},add(e,t){return[e[0]+t[0],e[1]+t[1]]},sub(e,t){return[e[0]-t[0],e[1]-t[1]]},addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function Et(e,t,n){return t===0||Math.abs(t)===1/0?Math.pow(e,n*5):e*t*n/(t+n*e)}function At(e,t,n,s=.15){return s===0?De(e,t,n):e<t?-Et(t-e,n-t,s)+t:e>n?+Et(e-n,n-t,s)+n:e}function Te(e,[t,n],[s,r]){const[[i,c],[o,a]]=e;return[At(t,i,c,s),At(n,o,a,r)]}function Oe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ie(e){var t=Oe(e,"string");return typeof t=="symbol"?t:String(t)}function M(e,t,n){return t=Ie(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Mt(Object(n),!0).forEach(function(s){M(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mt(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}const Yt={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function Dt(e){return e?e[0].toUpperCase()+e.slice(1):""}const je=["enter","leave"];function Re(e=!1,t){return e&&!je.includes(t)}function Le(e,t="",n=!1){const s=Yt[e],r=s&&s[t]||t;return"on"+Dt(e)+Dt(r)+(Re(n,r)?"Capture":"")}const Ne=["gotpointercapture","lostpointercapture"];function Be(e){let t=e.substring(2).toLowerCase();const n=!!~t.indexOf("passive");n&&(t=t.replace("passive",""));const s=Ne.includes(t)?"capturecapture":"capture",r=!!~t.indexOf(s);return r&&(t=t.replace("capture","")),{device:t,capture:r,passive:n}}function Fe(e,t=""){const n=Yt[e],s=n&&n[t]||t;return e+s}function rt(e){return"touches"in e}function Xt(e){return rt(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function Ke(e){return Array.from(e.touches).filter(t=>{var n,s;return t.target===e.currentTarget||((n=e.currentTarget)===null||n===void 0||(s=n.contains)===null||s===void 0?void 0:s.call(n,t.target))})}function $e(e){return e.type==="touchend"||e.type==="touchcancel"?e.changedTouches:e.targetTouches}function Wt(e){return rt(e)?$e(e)[0]:e}function Ue(e){return Ke(e).map(t=>t.identifier)}function ft(e){const t=Wt(e);return rt(e)?t.identifier:t.pointerId}function Tt(e){const t=Wt(e);return[t.clientX,t.clientY]}function ze(e){const t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){const{shiftKey:n,altKey:s,metaKey:r,ctrlKey:i}=e;Object.assign(t,{shiftKey:n,altKey:s,metaKey:r,ctrlKey:i})}return t}function tt(e,...t){return typeof e=="function"?e(...t):e}function Ge(){}function Ve(...e){return e.length===0?Ge:e.length===1?e[0]:function(){let t;for(const n of e)t=n.apply(this,arguments)||t;return t}}function Ot(e,t){return Object.assign({},t,e||{})}const He=32;class Ye{constructor(t,n,s){this.ctrl=t,this.args=n,this.key=s,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(t){this.ctrl.state[this.key]=t}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:t,shared:n,ingKey:s,args:r}=this;n[s]=t._active=t.active=t._blocked=t._force=!1,t._step=[!1,!1],t.intentional=!1,t._movement=[0,0],t._distance=[0,0],t._direction=[0,0],t._delta=[0,0],t._bounds=[[-1/0,1/0],[-1/0,1/0]],t.args=r,t.axis=void 0,t.memo=void 0,t.elapsedTime=t.timeDelta=0,t.direction=[0,0],t.distance=[0,0],t.overflow=[0,0],t._movementBound=[!1,!1],t.velocity=[0,0],t.movement=[0,0],t.delta=[0,0],t.timeStamp=0}start(t){const n=this.state,s=this.config;n._active||(this.reset(),this.computeInitial(),n._active=!0,n.target=t.target,n.currentTarget=t.currentTarget,n.lastOffset=s.from?tt(s.from,n):n.offset,n.offset=n.lastOffset,n.startTime=n.timeStamp=t.timeStamp)}computeValues(t){const n=this.state;n._values=t,n.values=this.config.transform(t)}computeInitial(){const t=this.state;t._initial=t._values,t.initial=t.values}compute(t){const{state:n,config:s,shared:r}=this;n.args=this.args;let i=0;if(t&&(n.event=t,s.preventDefault&&t.cancelable&&n.event.preventDefault(),n.type=t.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,ze(t)),r.down=r.pressed=r.buttons%2===1||r.touches>0,i=t.timeStamp-n.timeStamp,n.timeStamp=t.timeStamp,n.elapsedTime=n.timeStamp-n.startTime),n._active){const v=n._delta.map(Math.abs);A.addTo(n._distance,v)}this.axisIntent&&this.axisIntent(t);const[c,o]=n._movement,[a,f]=s.threshold,{_step:u,values:d}=n;if(s.hasCustomTransform?(u[0]===!1&&(u[0]=Math.abs(c)>=a&&d[0]),u[1]===!1&&(u[1]=Math.abs(o)>=f&&d[1])):(u[0]===!1&&(u[0]=Math.abs(c)>=a&&Math.sign(c)*a),u[1]===!1&&(u[1]=Math.abs(o)>=f&&Math.sign(o)*f)),n.intentional=u[0]!==!1||u[1]!==!1,!n.intentional)return;const p=[0,0];if(s.hasCustomTransform){const[v,w]=d;p[0]=u[0]!==!1?v-u[0]:0,p[1]=u[1]!==!1?w-u[1]:0}else p[0]=u[0]!==!1?c-u[0]:0,p[1]=u[1]!==!1?o-u[1]:0;this.restrictToAxis&&!n._blocked&&this.restrictToAxis(p);const l=n.offset,P=n._active&&!n._blocked||n.active;P&&(n.first=n._active&&!n.active,n.last=!n._active&&n.active,n.active=r[this.ingKey]=n._active,t&&(n.first&&("bounds"in s&&(n._bounds=tt(s.bounds,n)),this.setup&&this.setup()),n.movement=p,this.computeOffset()));const[y,_]=n.offset,[[m,k],[h,x]]=n._bounds;n.overflow=[y<m?-1:y>k?1:0,_<h?-1:_>x?1:0],n._movementBound[0]=n.overflow[0]?n._movementBound[0]===!1?n._movement[0]:n._movementBound[0]:!1,n._movementBound[1]=n.overflow[1]?n._movementBound[1]===!1?n._movement[1]:n._movementBound[1]:!1;const C=n._active?s.rubberband||[0,0]:[0,0];if(n.offset=Te(n._bounds,n.offset,C),n.delta=A.sub(n.offset,l),this.computeMovement(),P&&(!n.last||i>He)){n.delta=A.sub(n.offset,l);const v=n.delta.map(Math.abs);A.addTo(n.distance,v),n.direction=n.delta.map(Math.sign),n._direction=n._delta.map(Math.sign),!n.first&&i>0&&(n.velocity=[v[0]/i,v[1]/i],n.timeDelta=i)}}emit(){const t=this.state,n=this.shared,s=this.config;if(t._active||this.clean(),(t._blocked||!t.intentional)&&!t._force&&!s.triggerAllEvents)return;const r=this.handler(S(S(S({},n),t),{},{[this.aliasKey]:t.values}));r!==void 0&&(t.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function Xe([e,t],n){const s=Math.abs(e),r=Math.abs(t);if(s>r&&s>n)return"x";if(r>s&&r>n)return"y"}class We extends Ye{constructor(...t){super(...t),M(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=A.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=A.sub(this.state.offset,this.state.lastOffset)}axisIntent(t){const n=this.state,s=this.config;if(!n.axis&&t){const r=typeof s.axisThreshold=="object"?s.axisThreshold[Xt(t)]:s.axisThreshold;n.axis=Xe(n._movement,r)}n._blocked=(s.lockDirection||!!s.axis)&&!n.axis||!!s.axis&&s.axis!==n.axis}restrictToAxis(t){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":t[1]=0;break;case"y":t[0]=0;break}}}const qe=e=>e,It=.15,qt={enabled(e=!0){return e},eventOptions(e,t,n){return S(S({},n.shared.eventOptions),e)},preventDefault(e=!1){return e},triggerAllEvents(e=!1){return e},rubberband(e=0){switch(e){case!0:return[It,It];case!1:return[0,0];default:return A.toVector(e)}},from(e){if(typeof e=="function")return e;if(e!=null)return A.toVector(e)},transform(e,t,n){const s=e||n.shared.transform;return this.hasCustomTransform=!!s,s||qe},threshold(e){return A.toVector(e,0)}},Je=0,Y=S(S({},qt),{},{axis(e,t,{axis:n}){if(this.lockDirection=n==="lock",!this.lockDirection)return n},axisThreshold(e=Je){return e},bounds(e={}){if(typeof e=="function")return i=>Y.bounds(e(i));if("current"in e)return()=>e.current;if(typeof HTMLElement=="function"&&e instanceof HTMLElement)return e;const{left:t=-1/0,right:n=1/0,top:s=-1/0,bottom:r=1/0}=e;return[[t,n],[s,r]]}}),jt={ArrowRight:(e,t=1)=>[e*t,0],ArrowLeft:(e,t=1)=>[-1*e*t,0],ArrowUp:(e,t=1)=>[0,-1*e*t],ArrowDown:(e,t=1)=>[0,e*t]};class Qe extends We{constructor(...t){super(...t),M(this,"ingKey","dragging")}reset(){super.reset();const t=this.state;t._pointerId=void 0,t._pointerActive=!1,t._keyboardActive=!1,t._preventScroll=!1,t._delayed=!1,t.swipe=[0,0],t.tap=!1,t.canceled=!1,t.cancel=this.cancel.bind(this)}setup(){const t=this.state;if(t._bounds instanceof HTMLElement){const n=t._bounds.getBoundingClientRect(),s=t.currentTarget.getBoundingClientRect(),r={left:n.left-s.left+t.offset[0],right:n.right-s.right+t.offset[0],top:n.top-s.top+t.offset[1],bottom:n.bottom-s.bottom+t.offset[1]};t._bounds=Y.bounds(r)}}cancel(){const t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(t){const n=this.config,s=this.state;if(t.buttons!=null&&(Array.isArray(n.pointerButtons)?!n.pointerButtons.includes(t.buttons):n.pointerButtons!==-1&&n.pointerButtons!==t.buttons))return;const r=this.ctrl.setEventIds(t);n.pointerCapture&&t.target.setPointerCapture(t.pointerId),!(r&&r.size>1&&s._pointerActive)&&(this.start(t),this.setupPointer(t),s._pointerId=ft(t),s._pointerActive=!0,this.computeValues(Tt(t)),this.computeInitial(),n.preventScrollAxis&&Xt(t)!=="mouse"?(s._active=!1,this.setupScrollPrevention(t)):n.delay>0?(this.setupDelayTrigger(t),n.triggerAllEvents&&(this.compute(t),this.emit())):this.startPointerDrag(t))}startPointerDrag(t){const n=this.state;n._active=!0,n._preventScroll=!0,n._delayed=!1,this.compute(t),this.emit()}pointerMove(t){const n=this.state,s=this.config;if(!n._pointerActive)return;const r=ft(t);if(n._pointerId!==void 0&&r!==n._pointerId)return;const i=Tt(t);if(document.pointerLockElement===t.target?n._delta=[t.movementX,t.movementY]:(n._delta=A.sub(i,n._values),this.computeValues(i)),A.addTo(n._movement,n._delta),this.compute(t),n._delayed&&n.intentional){this.timeoutStore.remove("dragDelay"),n.active=!1,this.startPointerDrag(t);return}if(s.preventScrollAxis&&!n._preventScroll)if(n.axis)if(n.axis===s.preventScrollAxis||s.preventScrollAxis==="xy"){n._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(t);return}else return;this.emit()}pointerUp(t){this.ctrl.setEventIds(t);try{this.config.pointerCapture&&t.target.hasPointerCapture(t.pointerId)&&t.target.releasePointerCapture(t.pointerId)}catch{}const n=this.state,s=this.config;if(!n._active||!n._pointerActive)return;const r=ft(t);if(n._pointerId!==void 0&&r!==n._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(t);const[i,c]=n._distance;if(n.tap=i<=s.tapsThreshold&&c<=s.tapsThreshold,n.tap&&s.filterTaps)n._force=!0;else{const[o,a]=n._delta,[f,u]=n._movement,[d,p]=s.swipe.velocity,[l,P]=s.swipe.distance,y=s.swipe.duration;if(n.elapsedTime<y){const _=Math.abs(o/n.timeDelta),m=Math.abs(a/n.timeDelta);_>d&&Math.abs(f)>l&&(n.swipe[0]=Math.sign(o)),m>p&&Math.abs(u)>P&&(n.swipe[1]=Math.sign(a))}}this.emit()}pointerClick(t){!this.state.tap&&t.detail>0&&(t.preventDefault(),t.stopPropagation())}setupPointer(t){const n=this.config,s=n.device;n.pointerLock&&t.currentTarget.requestPointerLock(),n.pointerCapture||(this.eventStore.add(this.sharedConfig.window,s,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,s,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,s,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(t){this.state._preventScroll&&t.cancelable&&t.preventDefault()}setupScrollPrevention(t){this.state._preventScroll=!1,Ze(t);const n=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",n),this.eventStore.add(this.sharedConfig.window,"touch","cancel",n),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,t)}setupDelayTrigger(t){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(t)},this.config.delay)}keyDown(t){const n=jt[t.key];if(n){const s=this.state,r=t.shiftKey?10:t.altKey?.1:1;this.start(t),s._delta=n(this.config.keyboardDisplacement,r),s._keyboardActive=!0,A.addTo(s._movement,s._delta),this.compute(t),this.emit()}}keyUp(t){t.key in jt&&(this.state._keyboardActive=!1,this.setActive(),this.compute(t),this.emit())}bind(t){const n=this.config.device;t(n,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(t(n,"change",this.pointerMove.bind(this)),t(n,"end",this.pointerUp.bind(this)),t(n,"cancel",this.pointerUp.bind(this)),t("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(t("key","down",this.keyDown.bind(this)),t("key","up",this.keyUp.bind(this))),this.config.filterTaps&&t("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function Ze(e){"persist"in e&&typeof e.persist=="function"&&e.persist()}const X=typeof window<"u"&&window.document&&window.document.createElement;function Jt(){return X&&"ontouchstart"in window}function tn(){return Jt()||X&&window.navigator.maxTouchPoints>1}function en(){return X&&"onpointerdown"in window}function nn(){return X&&"exitPointerLock"in window.document}function sn(){try{return"constructor"in GestureEvent}catch{return!1}}const O={isBrowser:X,gesture:sn(),touch:Jt(),touchscreen:tn(),pointer:en(),pointerLock:nn()},rn=250,on=180,cn=.5,an=50,un=250,fn=10,Rt={mouse:0,touch:0,pen:8},ln=S(S({},Y),{},{device(e,t,{pointer:{touch:n=!1,lock:s=!1,mouse:r=!1}={}}){return this.pointerLock=s&&O.pointerLock,O.touch&&n?"touch":this.pointerLock?"mouse":O.pointer&&!r?"pointer":O.touch?"touch":"mouse"},preventScrollAxis(e,t,{preventScroll:n}){if(this.preventScrollDelay=typeof n=="number"?n:n||n===void 0&&e?rn:void 0,!(!O.touchscreen||n===!1))return e||(n!==void 0?"y":void 0)},pointerCapture(e,t,{pointer:{capture:n=!0,buttons:s=1,keys:r=!0}={}}){return this.pointerButtons=s,this.keys=r,!this.pointerLock&&this.device==="pointer"&&n},threshold(e,t,{filterTaps:n=!1,tapsThreshold:s=3,axis:r=void 0}){const i=A.toVector(e,n?s:r?1:0);return this.filterTaps=n,this.tapsThreshold=s,i},swipe({velocity:e=cn,distance:t=an,duration:n=un}={}){return{velocity:this.transform(A.toVector(e)),distance:this.transform(A.toVector(t)),duration:n}},delay(e=0){switch(e){case!0:return on;case!1:return 0;default:return e}},axisThreshold(e){return e?S(S({},Rt),e):Rt},keyboardDisplacement(e=fn){return e}});S(S({},qt),{},{device(e,t,{shared:n,pointer:{touch:s=!1}={}}){if(n.target&&!O.touch&&O.gesture)return"gesture";if(O.touch&&s)return"touch";if(O.touchscreen){if(O.pointer)return"pointer";if(O.touch)return"touch"}},bounds(e,t,{scaleBounds:n={},angleBounds:s={}}){const r=c=>{const o=Ot(tt(n,c),{min:-1/0,max:1/0});return[o.min,o.max]},i=c=>{const o=Ot(tt(s,c),{min:-1/0,max:1/0});return[o.min,o.max]};return typeof n!="function"&&typeof s!="function"?[r(),i()]:c=>[r(c),i(c)]},threshold(e,t,n){return this.lockDirection=n.axis==="lock",A.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey(e){return e===void 0?"ctrlKey":e},pinchOnWheel(e=!0){return e}});S(S({},Y),{},{mouseOnly:(e=!0)=>e});S(S({},Y),{},{mouseOnly:(e=!0)=>e});const Qt=new Map,mt=new Map;function hn(e){Qt.set(e.key,e.engine),mt.set(e.key,e.resolver)}const dn={key:"drag",engine:Qe,resolver:ln};function pn(e,t){if(e==null)return{};var n={},s=Object.keys(e),r,i;for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function mn(e,t){if(e==null)return{};var n=pn(e,t),s,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)s=i[r],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}const _n={target(e){if(e)return()=>"current"in e?e.current:e},enabled(e=!0){return e},window(e=O.isBrowser?window:void 0){return e},eventOptions({passive:e=!0,capture:t=!1}={}){return{passive:e,capture:t}},transform(e){return e}},yn=["target","eventOptions","window","enabled","transform"];function Q(e={},t){const n={};for(const[s,r]of Object.entries(t))switch(typeof r){case"function":n[s]=r.call(n,e[s],s,e);break;case"object":n[s]=Q(e[s],r);break;case"boolean":r&&(n[s]=e[s]);break}return n}function gn(e,t,n={}){const s=e,{target:r,eventOptions:i,window:c,enabled:o,transform:a}=s,f=mn(s,yn);if(n.shared=Q({target:r,eventOptions:i,window:c,enabled:o,transform:a},_n),t){const u=mt.get(t);n[t]=Q(S({shared:n.shared},f),u)}else for(const u in f){const d=mt.get(u);d&&(n[u]=Q(S({shared:n.shared},f[u]),d))}return n}class Zt{constructor(t,n){M(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=n}add(t,n,s,r,i){const c=this._listeners,o=Fe(n,s),a=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},f=S(S({},a),i);t.addEventListener(o,r,f);const u=()=>{t.removeEventListener(o,r,f),c.delete(u)};return c.add(u),u}clean(){this._listeners.forEach(t=>t()),this._listeners.clear()}}class vn{constructor(){M(this,"_timeouts",new Map)}add(t,n,s=140,...r){this.remove(t),this._timeouts.set(t,window.setTimeout(n,s,...r))}remove(t){const n=this._timeouts.get(t);n&&window.clearTimeout(n)}clean(){this._timeouts.forEach(t=>void window.clearTimeout(t)),this._timeouts.clear()}}class bn{constructor(t){M(this,"gestures",new Set),M(this,"_targetEventStore",new Zt(this)),M(this,"gestureEventStores",{}),M(this,"gestureTimeoutStores",{}),M(this,"handlers",{}),M(this,"config",{}),M(this,"pointerIds",new Set),M(this,"touchIds",new Set),M(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),xn(this,t)}setEventIds(t){if(rt(t))return this.touchIds=new Set(Ue(t)),this.touchIds;if("pointerId"in t)return t.type==="pointerup"||t.type==="pointercancel"?this.pointerIds.delete(t.pointerId):t.type==="pointerdown"&&this.pointerIds.add(t.pointerId),this.pointerIds}applyHandlers(t,n){this.handlers=t,this.nativeHandlers=n}applyConfig(t,n){this.config=gn(t,n,this.config)}clean(){this._targetEventStore.clean();for(const t of this.gestures)this.gestureEventStores[t].clean(),this.gestureTimeoutStores[t].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...t){const n=this.config.shared,s={};let r;if(!(n.target&&(r=n.target(),!r))){if(n.enabled){for(const c of this.gestures){const o=this.config[c],a=Lt(s,o.eventOptions,!!r);if(o.enabled){const f=Qt.get(c);new f(this,t,c).bind(a)}}const i=Lt(s,n.eventOptions,!!r);for(const c in this.nativeHandlers)i(c,"",o=>this.nativeHandlers[c](S(S({},this.state.shared),{},{event:o,args:t})),void 0,!0)}for(const i in s)s[i]=Ve(...s[i]);if(!r)return s;for(const i in s){const{device:c,capture:o,passive:a}=Be(i);this._targetEventStore.add(r,c,"",s[i],{capture:o,passive:a})}}}}function F(e,t){e.gestures.add(t),e.gestureEventStores[t]=new Zt(e,t),e.gestureTimeoutStores[t]=new vn}function xn(e,t){t.drag&&F(e,"drag"),t.wheel&&F(e,"wheel"),t.scroll&&F(e,"scroll"),t.move&&F(e,"move"),t.pinch&&F(e,"pinch"),t.hover&&F(e,"hover")}const Lt=(e,t,n)=>(s,r,i,c={},o=!1)=>{var a,f;const u=(a=c.capture)!==null&&a!==void 0?a:t.capture,d=(f=c.passive)!==null&&f!==void 0?f:t.passive;let p=o?s:Le(s,r,u);n&&d&&(p+="Passive"),e[p]=e[p]||[],e[p].push(i)};function wn(e,t={},n,s){const r=G.useMemo(()=>new bn(e),[]);if(r.applyHandlers(e,s),r.applyConfig(t,n),G.useEffect(r.effect.bind(r)),G.useEffect(()=>r.clean.bind(r),[]),t.target===void 0)return r.bind.bind(r)}function Sn(e,t){return hn(dn),wn({drag:e},t||{},"drag")}function Pn(){return b.jsx(j.div,{exit:{opacity:0,transition:{duration:.05}},className:"absolute inset-0 z-20 flex items-center justify-center bg-black/40 text-3xl font-bold text-amber-400 select-none",children:"Bravo!"})}function kn({onStart:e}){return b.jsx(j.div,{exit:{opacity:0,transition:{duration:.05}},className:"absolute inset-0 z-20 flex items-center justify-center text-white backdrop-blur-xl",children:b.jsx(ye,{variant:"contained",onClick:e,className:"cursor-pointer rounded-lg px-4 py-2 text-lg font-semibold",children:"BaÅŸla"})})}function Cn(){const e=Vt(),t=Ht(),[n,s]=g.useState(()=>new Date),r=e!==null,i=t!==null;g.useEffect(()=>{if(!r||i)return;s(new Date);const d=setInterval(()=>{s(new Date)},500);return()=>clearInterval(d)},[i,r]);const c=(i?t:n).getTime()-((e==null?void 0:e.getTime())??0),o=Math.floor(c/1e3),a=Math.floor(o/60),f=o%60,u=c%1e3;return b.jsxs(j.div,{className:z("font-mono text-xl text-amber-400",!r&&"invisible"),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[a.toString().padStart(2,"0"),":",f.toString().padStart(2,"0"),i&&"."+u.toString().padStart(3,"0")]},+r)}function En({cellSize:e,borderWidth:t}){const n=Ce(),s=Ee(),r=Ae(),i=Vt(),c=Ht(),{start:o,makeMove:a}=Me(),f=i!==null,u=c!==null,d=Sn(({xy:_})=>{y({x:_[0],y:_[1]})},{pointer:{capture:!1}}),p=g.useRef([]),l=g.useMemo(()=>s.map(([_,m],k)=>{const h=s[Math.max(k-1,0)];let x=0;for(let E=0;E<k;E++){const[W,ut]=s[E];x+=Math.abs(W-s[Math.max(E-1,0)][0])+Math.abs(ut-s[Math.max(E-1,0)][1])+1}const C=Math.abs(_-h[0])+Math.abs(m-h[1])+1,v=Pt([0,n.rows*n.cols],["#fcd34d","#f97316"])(x),w=Pt([0,n.rows*n.cols],["#fcd34d","#f97316"])(x+C-1);return b.jsx(j.div,{style:{background:`linear-gradient(${_>h[0]?"to bottom":_<h[0]?"to top":m>h[1]?"to right":"to left"}, ${v}, ${w})`},initial:{left:`${h[1]*e+t/2}px`,top:`${h[0]*e+t/2}px`,right:`${(n.cols-h[1]-1)*e+t/2}px`,bottom:`${(n.rows-h[0]-1)*e+t/2}px`},animate:{left:`${Math.min(m,h[1])*e+t/2}px`,top:`${Math.min(_,h[0])*e+t/2}px`,right:`${(n.cols-Math.max(m,h[1])-1)*e+t/2}px`,bottom:`${(n.rows-Math.max(_,h[0])-1)*e+t/2}px`},exit:{left:`${h[1]*e+t/2}px`,top:`${h[0]*e+t/2}px`,right:`${(n.cols-h[1]-1)*e+t/2}px`,bottom:`${(n.rows-h[0]-1)*e+t/2}px`,transition:{duration:0}},transition:{duration:de},className:z("pointer-events-none absolute z-10 m-0.5 rounded-full bg-amber-400 transition duration-150")},k)}),[s,n.rows,n.cols,e,t]),P=g.useCallback((_,m)=>{a([_,m])},[a]),y=g.useCallback(_=>{for(let m=0;m<n.rows;m++)for(let k=0;k<n.cols;k++){const h=p.current[m*n.cols+k];if(h){const x=h.getBoundingClientRect();_.x>=x.left&&_.x<=x.right&&_.y>=x.top&&_.y<=x.bottom&&a([m,k],!0)}}},[n.cols,n.rows,a]);return b.jsxs(ge,{gap:2,className:"items-center",children:[b.jsx(Cn,{}),b.jsxs(dt,{className:z("relative grid w-fit overflow-hidden rounded-lg border-5 border-orange-300 bg-orange-100"),children:[b.jsxs(dt,{...d(),className:z("touch-none",!f&&"pointer-events-none"),children:[b.jsx(pt,{children:l}),Array.from({length:n.rows}).map((_,m)=>b.jsx("div",{className:"flex",children:Array.from({length:n.cols}).map((k,h)=>{const x=n.path.prevCell[m][h][0]===-1,C=n.path.nextCell[m][h][0]===-1,v=n.markedCells.findIndex(w=>w[0]===m&&w[1]===h);return b.jsxs(j.div,{onClick:()=>P(m,h),className:z("flex cursor-pointer touch-none items-center justify-center border-orange-200 p-0.5"),initial:{backgroundColor:"#fff0"},whileTap:{backgroundColor:"#fff",transition:{duration:0}},ref:w=>{w&&(p.current[m*n.cols+h]=w)},style:{width:e,height:e,borderWidth:t/2,...m?void 0:{borderTopWidth:0},...h?void 0:{borderLeftWidth:0},...h===n.cols-1?{borderRightWidth:0}:void 0,...m===n.rows-1?{borderBottomWidth:0}:void 0},children:[x&&b.jsx("div",{className:"z-20 flex items-center justify-center rounded-full bg-amber-500 select-none",style:{width:e-4-2*t,height:e-4-2*t},children:"1"}),C&&b.jsx(j.div,{initial:{scale:r([m,h])?1.5:1},animate:{scale:1},className:"z-20 flex items-center justify-center rounded-full bg-amber-500 select-none",style:{width:e-4-2*t,height:e-4-2*t},children:n.markedCells.length+2},+r([m,h])),v>=0&&b.jsx(j.div,{initial:{scale:r([m,h])?1.5:1},animate:{scale:1},className:"z-20 flex items-center justify-center rounded-full bg-amber-500 select-none",style:{width:e-4-2*t,height:e-4-2*t},children:v+2},+r([m,h]))]},`${m}-${h}`)})},m))]}),b.jsxs(pt,{children:[!f&&b.jsx(kn,{onStart:o}),u&&b.jsx(Pn,{})]})]})]})}function Nt(e,t,n){for(let s=0;s<2;s++)if(e[s]<Math.min(t[s],n[s])||e[s]>Math.max(t[s],n[s]))return!1;return!0}function R(e,t){return e[0]===t[0]&&e[1]===t[1]}function J(e,t){return e[0]===t[0]||e[1]===t[1]}function An({grid:e,steps:t}){const{markedCells:n}=e,s=t[0],r=t[t.length-1],i=e.path.cells[0],c=e.path.cells[e.path.cells.length-1];if(!R(s,i)||!R(r,c))return!1;let o=1,a=1;for(let f=1;f<t.length;f++){const u=t[f],d=t[Math.max(f-1,0)],p=Math.abs(u[0]-d[0])+Math.abs(u[1]-d[1]);o+=p;for(let l=d[0]+1;l<=u[0];l++)if(e.isMarked[l][u[1]]){if(n.findIndex(y=>R(y,[l,u[1]]))+2!==a+1)return!1;a++}for(let l=d[0]-1;l>=u[0];l--)if(e.isMarked[l][u[1]]){if(n.findIndex(y=>R(y,[l,u[1]]))+2!==a+1)return!1;a++}for(let l=d[1]+1;l<=u[1];l++)if(e.isMarked[u[0]][l]){if(n.findIndex(y=>R(y,[u[0],l]))+2!==a+1)return!1;a++}for(let l=d[1]-1;l>=u[1];l--)if(e.isMarked[u[0]][l]){if(n.findIndex(y=>R(y,[u[0],l]))+2!==a+1)return!1;a++}}return o===e.rows*e.cols}var te=Symbol.for("immer-nothing"),Bt=Symbol.for("immer-draftable"),D=Symbol.for("immer-state");function I(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var K=Object.getPrototypeOf;function $(e){return!!e&&!!e[D]}function N(e){var t;return e?ee(e)||Array.isArray(e)||!!e[Bt]||!!((t=e.constructor)!=null&&t[Bt])||ot(e)||ct(e):!1}var Mn=Object.prototype.constructor.toString();function ee(e){if(!e||typeof e!="object")return!1;const t=K(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Mn}function et(e,t){it(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,s)=>t(s,n,e))}function it(e){const t=e[D];return t?t.type_:Array.isArray(e)?1:ot(e)?2:ct(e)?3:0}function _t(e,t){return it(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ne(e,t,n){const s=it(e);s===2?e.set(t,n):s===3?e.add(n):e[t]=n}function Dn(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function ot(e){return e instanceof Map}function ct(e){return e instanceof Set}function L(e){return e.copy_||e.base_}function yt(e,t){if(ot(e))return new Map(e);if(ct(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=ee(e);if(t===!0||t==="class_only"&&!n){const s=Object.getOwnPropertyDescriptors(e);delete s[D];let r=Reflect.ownKeys(s);for(let i=0;i<r.length;i++){const c=r[i],o=s[c];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(s[c]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[c]})}return Object.create(K(e),s)}else{const s=K(e);if(s!==null&&n)return{...e};const r=Object.create(s);return Object.assign(r,e)}}function wt(e,t=!1){return at(e)||$(e)||!N(e)||(it(e)>1&&(e.set=e.add=e.clear=e.delete=Tn),Object.freeze(e),t&&Object.entries(e).forEach(([n,s])=>wt(s,!0))),e}function Tn(){I(2)}function at(e){return Object.isFrozen(e)}var On={};function B(e){const t=On[e];return t||I(0,e),t}var V;function se(){return V}function In(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Ft(e,t){t&&(B("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function gt(e){vt(e),e.drafts_.forEach(jn),e.drafts_=null}function vt(e){e===V&&(V=e.parent_)}function Kt(e){return V=In(V,e)}function jn(e){const t=e[D];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function $t(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[D].modified_&&(gt(t),I(4)),N(e)&&(e=nt(t,e),t.parent_||st(t,e)),t.patches_&&B("Patches").generateReplacementPatches_(n[D].base_,e,t.patches_,t.inversePatches_)):e=nt(t,n,[]),gt(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==te?e:void 0}function nt(e,t,n){if(at(t))return t;const s=t[D];if(!s)return et(t,(r,i)=>Ut(e,s,t,r,i,n)),t;if(s.scope_!==e)return t;if(!s.modified_)return st(e,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const r=s.copy_;let i=r,c=!1;s.type_===3&&(i=new Set(r),r.clear(),c=!0),et(i,(o,a)=>Ut(e,s,r,o,a,n,c)),st(e,r,!1),n&&e.patches_&&B("Patches").generatePatches_(s,n,e.patches_,e.inversePatches_)}return s.copy_}function Ut(e,t,n,s,r,i,c){if($(r)){const o=i&&t&&t.type_!==3&&!_t(t.assigned_,s)?i.concat(s):void 0,a=nt(e,r,o);if(ne(n,s,a),$(a))e.canAutoFreeze_=!1;else return}else c&&n.add(r);if(N(r)&&!at(r)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;nt(e,r),(!t||!t.scope_.parent_)&&typeof s!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,s)&&st(e,r)}}function st(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&wt(t,n)}function Rn(e,t){const n=Array.isArray(e),s={type_:n?1:0,scope_:t?t.scope_:se(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=s,i=St;n&&(r=[s],i=H);const{revoke:c,proxy:o}=Proxy.revocable(r,i);return s.draft_=o,s.revoke_=c,o}var St={get(e,t){if(t===D)return e;const n=L(e);if(!_t(n,t))return Ln(e,n,t);const s=n[t];return e.finalized_||!N(s)?s:s===lt(e.base_,t)?(ht(e),e.copy_[t]=xt(s,e)):s},has(e,t){return t in L(e)},ownKeys(e){return Reflect.ownKeys(L(e))},set(e,t,n){const s=re(L(e),t);if(s!=null&&s.set)return s.set.call(e.draft_,n),!0;if(!e.modified_){const r=lt(L(e),t),i=r==null?void 0:r[D];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Dn(n,r)&&(n!==void 0||_t(e.base_,t)))return!0;ht(e),bt(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return lt(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,ht(e),bt(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=L(e),s=Reflect.getOwnPropertyDescriptor(n,t);return s&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:s.enumerable,value:n[t]}},defineProperty(){I(11)},getPrototypeOf(e){return K(e.base_)},setPrototypeOf(){I(12)}},H={};et(St,(e,t)=>{H[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});H.deleteProperty=function(e,t){return H.set.call(this,e,t,void 0)};H.set=function(e,t,n){return St.set.call(this,e[0],t,n,e[0])};function lt(e,t){const n=e[D];return(n?L(n):e)[t]}function Ln(e,t,n){var r;const s=re(t,n);return s?"value"in s?s.value:(r=s.get)==null?void 0:r.call(e.draft_):void 0}function re(e,t){if(!(t in e))return;let n=K(e);for(;n;){const s=Object.getOwnPropertyDescriptor(n,t);if(s)return s;n=K(n)}}function bt(e){e.modified_||(e.modified_=!0,e.parent_&&bt(e.parent_))}function ht(e){e.copy_||(e.copy_=yt(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Nn=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,s)=>{if(typeof t=="function"&&typeof n!="function"){const i=n;n=t;const c=this;return function(a=i,...f){return c.produce(a,u=>n.call(this,u,...f))}}typeof n!="function"&&I(6),s!==void 0&&typeof s!="function"&&I(7);let r;if(N(t)){const i=Kt(this),c=xt(t,void 0);let o=!0;try{r=n(c),o=!1}finally{o?gt(i):vt(i)}return Ft(i,s),$t(r,i)}else if(!t||typeof t!="object"){if(r=n(t),r===void 0&&(r=t),r===te&&(r=void 0),this.autoFreeze_&&wt(r,!0),s){const i=[],c=[];B("Patches").generateReplacementPatches_(t,r,i,c),s(i,c)}return r}else I(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(c,...o)=>this.produceWithPatches(c,a=>t(a,...o));let s,r;return[this.produce(t,n,(c,o)=>{s=c,r=o}),s,r]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){N(e)||I(8),$(e)&&(e=Bn(e));const t=Kt(this),n=xt(e,void 0);return n[D].isManual_=!0,vt(t),n}finishDraft(e,t){const n=e&&e[D];(!n||!n.isManual_)&&I(9);const{scope_:s}=n;return Ft(s,t),$t(void 0,s)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(r.path.length===0&&r.op==="replace"){e=r.value;break}}n>-1&&(t=t.slice(n+1));const s=B("Patches").applyPatches_;return $(e)?s(e,t):this.produce(e,r=>s(r,t))}};function xt(e,t){const n=ot(e)?B("MapSet").proxyMap_(e,t):ct(e)?B("MapSet").proxySet_(e,t):Rn(e,t);return(t?t.scope_:se()).drafts_.push(n),n}function Bn(e){return $(e)||I(10,e),ie(e)}function ie(e){if(!N(e)||at(e))return e;const t=e[D];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=yt(e,t.scope_.immer_.useStrictShallowCopy_)}else n=yt(e,!0);return et(n,(s,r)=>{ne(n,s,ie(r))}),t&&(t.finalized_=!1),n}var T=new Nn,Fn=T.produce;T.produceWithPatches.bind(T);T.setAutoFreeze.bind(T);T.setUseStrictShallowCopy.bind(T);T.applyPatches.bind(T);T.createDraft.bind(T);T.finishDraft.bind(T);const Kn=e=>(t,n,s)=>(s.setState=(r,i,...c)=>{const o=typeof r=="function"?Fn(r):r;return t(o,i,...c)},e(s.setState,n,s)),$n=Kn;function Un(e){return Se()($n((t,n)=>({grid:e,steps:[e.path.cells[0]],startedAt:null,finishedAt:null,isVisited:s=>{const r=n().steps;for(let i=0;i<r.length;i++){const c=r[i],o=r[Math.max(i-1,0)];if(Nt(s,c,o))return!0}return!1},actions:{start:()=>t(s=>{s.startedAt=new Date}),makeMove:(s,r)=>t(i=>{if(!i.finishedAt&&!R(s,i.steps[i.steps.length-1])){if(i.isVisited(s)){let c=null;for(let o=0;o<i.steps.length;o++){const a=i.steps[o],f=i.steps[Math.max(o-1,0)];if(Nt(s,a,f)){c=o;break}}if(c===null){console.warn("UNEXPECTED: No step found that passes through the cell");return}if(r&&c<i.steps.length-2)return;i.steps=i.steps.slice(0,c),i.steps.push(s)}else{const c=i.steps[i.steps.length-1],o=i.steps[i.steps.length-2]??e.path.cells[0];if(!J(c,s))return;for(let a=Math.min(c[0],s[0])+1;a<Math.max(c[0],s[0]);a++)if(i.isVisited([a,s[1]]))return;for(let a=Math.min(c[1],s[1])+1;a<Math.max(c[1],s[1]);a++)if(i.isVisited([s[0],a]))return;i.steps.length===1||!(J(o,s)&&J(c,s)&&J(o,c))?i.steps.push(s):i.steps[i.steps.length-1]=s}An(i)&&(i.finishedAt=new Date)}})}})))}function zn({grid:e,children:t}){const n=g.useRef(null);return n.current||(n.current=Un(e)),b.jsx(Gt.Provider,{value:n.current,children:t})}function oe(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}function Z(e,t,n){return Array.from({length:e},(s,r)=>Array.from({length:t},(i,c)=>typeof n=="function"?n(r,c):n))}function Gn(e,t){const n=Z(e,t,[-1,-1]),s=Z(e,t,[-1,-1]),r=Z(e,t,!1),i=(y,_)=>y>=0&&y<e&&_>=0&&_<t,c=[0,1,0,-1],o=[1,0,-1,0];let a=e*t;function f(y,_){if(a-=+!r[y][_],r[y][_]=!0,!a)return null;const m=oe([0,1,2,3]);for(const k of m){const h=y+c[k],x=_+o[k];if(!(!i(h,x)||r[h][x]))return s[y][_]=[h,x],n[h][x]=[y,_],f(h,x)}for(const k of m){const h=y+c[k],x=_+o[k];if(!i(h,x)||n[y][_][0]===h&&n[y][_][1]===x)continue;s[y][_]=[h,x];const[C,v]=s[h][x];s[h][x]=[y,_],n[C][v]=[-1,-1];for(let w=y,E=_;w!==-1;[w,E]=s[w][E])[n[w][E],s[w][E]]=[s[w][E],n[w][E]];return[C,v]}return null}const u=Math.floor(Math.random()*e),d=Math.floor(Math.random()*t);let p=u,l=d;for(;;){const y=f(p,l);if(y===null)break;p=y[0],l=y[1]}const P=[];for(p=u,l=d,P.push([p,l]);s[p][l][0]!==-1;)[p,l]=s[p][l],P.push([p,l]);return{cells:P,prevCell:n,nextCell:s}}const Yn=function(){const t=pe.useSearch(),n=t.rows,s=t.cols,[r]=g.useState(()=>Gn(n,s)),i=g.useMemo(()=>oe(r.cells.filter(([o,a])=>r.prevCell[o][a][0]!==-1&&r.nextCell[o][a][0]!==-1).map((o,a)=>[o,a])).slice(0,Math.max(n,s)+Math.floor(Math.min(n,s)/2)).sort((o,a)=>o[1]-a[1]).map(([o])=>o),[s,n,r.cells,r.nextCell,r.prevCell]),c=g.useMemo(()=>({rows:n,cols:s,path:r,markedCells:i,isMarked:Z(n,s,!1).map((o,a)=>o.map((f,u)=>i.some(d=>d[0]===a&&d[1]===u)))}),[s,i,r,n]);return b.jsx(zn,{grid:c,children:b.jsx(dt,{className:"flex flex-1 flex-col items-center justify-center px-1 py-2",children:b.jsx(pt,{children:b.jsx(j.div,{initial:{scale:1.1},animate:{scale:1},children:b.jsx(En,{cellSize:_e,borderWidth:me})})})})})};export{Yn as component};
